<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
  <!-- Meta Tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kaidah Usul Fiqh — Arab + Terjemahan Indonesia</title>
  <meta name="description" content="Kompilasi Kaidah Usul Fiqh dengan teks Arab, terjemahan Indonesia, contoh, pencarian, filter kategori, dan mode gelap. Desain modern dan premium." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Amiri:wght@400;700&family=Noto+Naskh+Arabic:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- CSS (Premium Design & Animations) -->
  <style>
    /* 1. CSS Variables for Theming */
    :root {
      --font-sans: 'Inter', sans-serif;
      --font-serif-ar: 'Amiri', serif;
      --font-naskh-ar: 'Noto Naskh Arabic', serif;

      --c-bg-light: #f8f9fa;
      --c-text-light: #212529;
      --c-card-bg-light: #ffffff;
      --c-border-light: #dee2e6;
      --c-accent-light: #005f73;
      --c-accent-text-light: #ffffff;
      --c-shadow-light: rgba(0, 0, 0, 0.05);
      --c-chip-bg-light: #e9ecef;
      --c-chip-active-light: var(--c-accent-light);

      --c-bg-dark: #121212;
      --c-text-dark: #e0e0e0;
      --c-card-bg-dark: #1e1e1e;
      --c-border-dark: #3a3a3a;
      --c-accent-dark: #00b4d8;
      --c-accent-text-dark: #121212;
      --c-shadow-dark: rgba(0, 0, 0, 0.2);
      --c-chip-bg-dark: #333;
      --c-chip-active-dark: var(--c-accent-dark);
    }
    
    [data-theme="light"] {
      --c-bg: var(--c-bg-light);
      --c-text: var(--c-text-light);
      --c-card-bg: var(--c-card-bg-light);
      --c-border: var(--c-border-light);
      --c-accent: var(--c-accent-light);
      --c-accent-text: var(--c-accent-text-light);
      --c-shadow: var(--c-shadow-light);
      --c-chip-bg: var(--c-chip-bg-light);
      --c-chip-active: var(--c-chip-active-light);
    }

    [data-theme="dark"] {
      --c-bg: var(--c-bg-dark);
      --c-text: var(--c-text-dark);
      --c-card-bg: var(--c-card-bg-dark);
      --c-border: var(--c-border-dark);
      --c-accent: var(--c-accent-dark);
      --c-accent-text: var(--c-accent-text-dark);
      --c-shadow: var(--c-shadow-dark);
      --c-chip-bg: var(--c-chip-bg-dark);
      --c-chip-active: var(--c-chip-active-dark);
    }

    /* 2. General Styles */
    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: var(--font-sans);
      background-color: var(--c-bg);
      color: var(--c-text);
      line-height: 1.7;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    main, header, footer {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }
    h1, h2, h3 { font-weight: 700; color: var(--c-accent); }
    .ar { font-family: var(--font-naskh-ar); line-height: 1.8; }
    a { color: var(--c-accent); text-decoration: none; transition: opacity 0.2s ease; }
    a:hover { opacity: 0.8; }
    .link { text-decoration: underline; text-underline-offset: 4px; }

    /* 3. Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in { animation: fadeIn 0.8s ease-out forwards; }
    .fade-up { animation: fadeUp 0.8s ease-out forwards; }
    .fade-up-delay-1 { animation: fadeUp 0.8s 0.2s ease-out forwards; }
    .fade-up-delay-2 { animation: fadeUp 0.8s 0.4s ease-out forwards; }
    .will-reveal { opacity: 0; transform: translateY(25px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
    .will-reveal.revealed { opacity: 1; transform: translateY(0); }

    /* 4. Header & Hero Section */
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      animation: fadeIn 1s ease;
    }
    .nav .brand { display: flex; align-items: center; gap: 12px; }
    .brand-badge { width: 40px; height: 40px; border-radius: 50%; background: var(--c-accent); color: var(--c-accent-text); display: flex; justify-content: center; align-items: center; font-family: var(--font-serif-ar); font-size: 24px; }
    .nav div:last-child { display: flex; align-items: center; gap: 20px; }
    .nav a { font-weight: 500; }
    .mode-toggle {
      background: none; border: 1px solid var(--c-border);
      color: var(--c-text); padding: 8px 12px; border-radius: 20px;
      cursor: pointer; font-family: var(--font-sans); transition: background-color 0.2s, color 0.2s;
    }
    .mode-toggle:hover { background-color: var(--c-chip-bg); }

    .hero {
      text-align: center;
      padding: 80px 0;
      background: radial-gradient(circle, var(--c-card-bg) 0%, transparent 80%);
    }
    .hero > div { max-width: 700px; margin: 0 auto; }
    .hero h1 {
      font-size: 3rem;
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 20px;
      opacity: 0;
    }
    .hero p {
      font-size: 1.15rem;
      color: var(--c-text);
      opacity: 0.8;
      margin-bottom: 30px;
      opacity: 0;
    }
    .meta { display: flex; justify-content: center; gap: 12px; opacity: 0; }
    .pill { background: var(--c-chip-bg); padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; font-weight: 500; }

    /* 5. Controls (Search & Filter) */
    .controls { padding: 40px 0; border-top: 1px solid var(--c-border); }
    .searchbar { display: flex; margin-bottom: 20px; position: relative; }
    #search {
      width: 100%;
      padding: 15px 20px;
      font-size: 1rem;
      border: 1px solid var(--c-border);
      border-radius: 12px;
      background-color: var(--c-card-bg);
      color: var(--c-text);
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    #search:focus {
      outline: none;
      border-color: var(--c-accent);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--c-accent) 20%, transparent);
    }
    .kount { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: var(--c-chip-bg); color: var(--c-text); font-size: 0.8rem; padding: 4px 10px; border-radius: 8px; }

    .chips { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
    .chip {
      background: var(--c-chip-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      cursor: pointer;
      color: var(--c-text);
      transition: background-color 0.3s, color 0.3s;
    }
    .chip.active { background: var(--c-accent); color: var(--c-accent-text); }
    .clear-btn { background: none; border: none; color: var(--c-accent); cursor: pointer; padding: 5px; text-decoration: underline; }

    /* 6. Card Grid & Card Design */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 25px;
      padding-bottom: 60px;
    }
    .card {
      background: var(--c-card-bg);
      border: 1px solid var(--c-border);
      border-radius: 16px;
      padding: 25px;
      position: relative;
      box-shadow: 0 4px 15px var(--c-shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover { transform: translateY(-8px); box-shadow: 0 10px 25px var(--c-shadow); }
    .card .top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .card .num {
      width: 30px; height: 30px;
      background: var(--c-accent); color: var(--c-accent-text);
      border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      font-size: 0.9rem; font-weight: 600;
    }
    .card .cat { font-size: 0.85rem; font-weight: 500; color: var(--c-text); opacity: 0.7; }
    .card h3 { font-family: var(--font-serif-ar); font-size: 1.8rem; margin: 0 0 5px 0; color: var(--c-text); }
    .card .title-id { font-weight: 600; font-size: 1.1rem; margin-bottom: 15px; color: var(--c-accent); }
    .card p { margin: 0 0 10px 0; font-size: 0.95rem; opacity: 0.9; }
    .copy-btn {
      position: absolute; top: 15px; right: 15px;
      background: var(--c-chip-bg); border: none;
      width: 80px; text-align: center;
      padding: 6px 8px; border-radius: 8px;
      cursor: pointer; opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.8rem;
    }
    .card:hover .copy-btn { opacity: 1; }
    
    .example summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--c-accent);
      margin-top: 20px;
    }
    .example-body {
      background: color-mix(in srgb, var(--c-bg) 50%, var(--c-card-bg));
      border-left: 3px solid var(--c-accent);
      padding: 15px;
      margin-top: 10px;
      border-radius: 0 8px 8px 0;
    }
    .ex-id { font-style: italic; opacity: 0.8; }

    /* 7. Sections & Footer */
    section { padding: 50px 0; border-top: 1px solid var(--c-border); }
    section h2 { font-size: 2rem; text-align: center; margin-bottom: 30px; }
    .refs { list-style: none; padding-left: 0; max-width: 650px; margin: 0 auto; }
    .refs li {
      background: var(--c-card-bg);
      border: 1px solid var(--c-border);
      padding: 15px; border-radius: 8px; margin-bottom: 10px;
    }

    footer {
      padding: 30px; text-align: center;
      color: var(--c-text); opacity: 0.6;
      border-top: 1px solid var(--c-border);
      margin-top: 50px;
      transition: opacity 0.5s;
    }
    footer.visible { opacity: 1; }
    
    /* 8. Utility Classes (Toast, To-Top) */
    .toast {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #222; color: #fff;
      padding: 12px 25px; border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      opacity: 0; visibility: hidden;
      transition: transform 0.4s ease, opacity 0.4s ease, visibility 0.4s;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; visibility: visible; }

    .to-top {
      position: fixed; bottom: 20px; right: 20px;
      opacity: 0; visibility: hidden;
      transition: opacity 0.4s, visibility 0.4s;
    }
    .to-top.visible { opacity: 1; visibility: visible; }
    .to-top button {
      width: 50px; height: 50px;
      background: var(--c-accent); color: var(--c-accent-text);
      border: none; border-radius: 50%; font-size: 1.5rem;
      cursor: pointer; box-shadow: 0 4px 10px var(--c-shadow);
    }
    
    /* 9. Responsive Design */
    @media (max-width: 768px) {
      .hero h1 { font-size: 2.2rem; }
      .hero p { font-size: 1rem; }
      .nav div:last-child { gap: 10px; }
      .nav a { font-size: 0.9rem; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<header>
  <nav class="nav" aria-label="Navigasi utama">
    <div class="brand">
      <div class="brand-badge" aria-hidden="true">أ</div>
      <span style="font-weight: 600;">Usul Fiqh</span>
    </div>
    <div>
      <a href="#kaidah">Kaidah</a>
      <a href="#tentang">Tentang</a>
      <a href="#sumber">Sumber</a>
      <button class="mode-toggle" id="modeToggle" type="button" aria-label="Ganti tema">🌙 Mode Gelap</button>
    </div>
  </nav>

  <div class="hero">
    <div>
      <h1 class="fade-up">Kaidah Usul Fiqh</h1>
      <p class="fade-up-delay-1">Kompilasi kaidah-kaidah fundamental Usul Fiqh dalam Bahasa Arab beserta terjemahan Indonesia. Dilengkapi pencarian, filter, contoh, tombol salin, dan mode gelap.</p>
    </div>
    <div class="meta fade-up-delay-2">
      <span class="pill">📜 Arab + Indonesia</span>
      <span class="pill">🌗 Mode Gelap/Terang</span>
      <span class="pill">🔍 Pencarian & Filter</span>
    </div>
  </div>

  <div class="controls" id="kaidah">
    <div class="searchbar" role="search">
      <input id="search" type="search" placeholder="Cari: الأمر, النهي, العام, qiyas, ijma, dll…" aria-label="Cari kaidah" />
      <div class="kount"><span id="count">50</span> kaidah</div>
    </div>
    <div class="chips" id="chips"></div>
    <button class="clear-btn" id="clearFilters" title="Hapus filter">Hapus Semua Filter</button>
  </div>
</header>

<main>
  <div class="grid" id="grid"></div>

  <section id="tentang" aria-labelledby="tentang-title">
    <h2 id="tentang-title">Tentang Kompilasi Ini</h2>
    <p style="text-align:center; max-width:700px; margin:0 auto;">
      Daftar ini merangkum prinsip-prinsip dasar (kaidah) dalam Usul Fiqh, yaitu metodologi untuk menggali hukum Islam dari sumber-sumbernya. Kaidah dan contoh disajikan dalam bahasa Arab dengan terjemahan Indonesia untuk memfasilitasi pembelajaran dan rujukan cepat bagi para penuntut ilmu.
    </p>
  </section>

  <section id="sumber" aria-labelledby="sumber-title">
    <h2 id="sumber-title">Sumber Rujukan Utama</h2>
    <ul class="refs">
      <li>Al-Risālah oleh Imam al-Shāfi‘ī — Fondasi ilmu Usul Fiqh.</li>
      <li>Al-Waraqāt fī Uṣūl al-Fiqh oleh Imam al-Juwaynī.</li>
      <li>Al-Mustaṣfā min ‘Ilm al-Uṣūl oleh Imam al-Ghazālī.</li>
      <li>Jam‘ al-Jawāmi‘ oleh Tāj al-Dīn al-Subkī.</li>
      <li>Karya-karya kontemporer dalam bidang Usul Fiqh dan Maqasid al-Shariah.</li>
      <li>Wahbah al-Zuhaylī, Uṣūl al-Fiqh al-Islāmī.</li>
    </ul>
  </section>
</main>

<footer class="will-reveal">
  <div class="creator">Dooze Project.</div>
</footer>

<div class="to-top" id="toTop">
  <button aria-label="Kembali ke atas" onclick="window.scrollTo({top:0, behavior:'smooth'})">↑</button>
</div>
<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
  // 1. Setup Tema Gelap/Terang
  const root = document.documentElement;
  const modeToggle = document.getElementById('modeToggle');
  const savedTheme = localStorage.getItem('theme');
  if(savedTheme){ root.setAttribute('data-theme', savedTheme); modeToggle.textContent = savedTheme === 'dark' ? '☀️ Mode Terang' : '🌙 Mode Gelap'; }
  else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
    root.setAttribute('data-theme','dark'); modeToggle.textContent = '☀️ Mode Terang';
  }
  modeToggle.addEventListener('click', () => {
    const currentTheme = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', currentTheme);
    localStorage.setItem('theme', currentTheme);
    modeToggle.textContent = currentTheme === 'dark' ? '☀️ Mode Terang' : '🌙 Mode Gelap';
  });

  // 2. Data Kaidah Usul Fiqh
  const categories = [
    "Prinsip Dasar",
    "Sumber Hukum Primer",
    "Sumber Hukum Sekunder",
    "Kaidah Dilalah (Penunjukan Makna)",
    "Qiyas (Analogi)",
    "Maqasid & Ijtihad",
    "Kaidah Fikih Asasi"
  ];

  const rules = [
    // Prinsip Dasar (1-5)
    {no:1, cat:"Prinsip Dasar",
      titleAr:"الحكم الشرعي", titleId:"Hukum Syar'i",
      descAr:"خطاب الله المتعلق بأفعال المكلفين اقتضاءً أو تخييرًا أو وضعًا.",
      descId:"Titah Allah yang berkaitan dengan perbuatan mukallaf, baik berupa tuntutan, pilihan, maupun ketetapan.",
      exAr:"الوجوب (اقتضاء الفعل)، الحرمة (اقتضاء الترك)، الإباحة (التخيير).", exId:"Wajib (tuntutan melakukan), Haram (tuntutan meninggalkan), Mubah (pilihan)."},
    {no:2, cat:"Prinsip Dasar",
      titleAr:"أقسام الحكم التكليفي", titleId:"Pembagian Hukum Taklifi",
      descAr:"خمسة: الواجب، والمندوب، والمحرّم، والمكروه، والمباح.",
      descId:"Ada lima: Wajib, Sunnah (Mandub), Haram, Makruh, dan Mubah.",
      exAr:"الصلاة واجبة، والسواك مندوب، والسرقة محرّمة، والنظر بلا شهوة مكروه، والأكل مباح.", exId:"Shalat itu wajib, siwak itu sunnah, mencuri itu haram, melihat tanpa syahwat itu makruh, makan itu mubah."},
    {no:3, cat:"Prinsip Dasar",
      titleAr:"أقسام الحكم الوضعي", titleId:"Pembagian Hukum Wadh'i",
      descAr:"السبب، والشرط، والمانع، والصحة، والفساد.",
      descId:"Ada lima: Sebab, Syarat, Penghalang (Mani'), Sah, dan Batal/Fasad.",
      exAr:"دخول الوقت سببٌ لوجوب الصلاة، والوضوء شرطٌ لصحتها، والحيض مانعٌ من وجوبها.", exId:"Masuk waktu adalah sebab wajibnya shalat, wudhu adalah syarat sahnya, dan haid adalah penghalang wajibnya."},
    {no:4, cat:"Prinsip Dasar",
      titleAr:"الأصل في العبادات التوقيف", titleId:"Asal Ibadah adalah Taufiqi",
      descAr:"لا تُشرع عبادة إلا بدليل من الشرع.",
      descId:"Suatu ibadah tidak boleh disyariatkan kecuali ada dalilnya dari syariat.",
      exAr:"لا يجوز اختراع صلاة سادسة، لأن عدد الصلوات محدد بالنص.", exId:"Tidak boleh membuat shalat keenam, karena jumlah shalat sudah ditentukan oleh dalil (nash)."},
    {no:5, cat:"Prinsip Dasar",
      titleAr:"الأصل في المعاملات الإباحة", titleId:"Asal Muamalah adalah Mubah",
      descAr:"كل معاملة جائزة ما لم يأت دليل على تحريمها.",
      descId:"Setiap transaksi (muamalah) diperbolehkan selama tidak ada dalil yang mengharamkannya.",
      exAr:"البيع عبر الإنترنت جائز لأنه لم يرد نص يمنعه.", exId:"Jual beli online diperbolehkan karena tidak ada dalil yang melarangnya."},

    // Sumber Hukum Primer (6-10)
    {no:6, cat:"Sumber Hukum Primer",
      titleAr:"القرآن الكريم", titleId:"Al-Qur'an",
      descAr:"كلام الله المنزل على محمد ﷺ، المتعبَّد بتلاوته، المنقول بالتواتر.",
      descId:"Kalam Allah yang diturunkan kepada Nabi Muhammad SAW, membacanya adalah ibadah, dan diriwayatkan secara mutawatir.",
      exAr:"قوله تعالى: ﴿وَأَقِيمُوا الصَّلَاةَ﴾ دليل وجوب الصلاة.", exId:"Firman Allah: “Dan dirikanlah shalat” adalah dalil wajibnya shalat."},
    {no:7, cat:"Sumber Hukum Primer",
      titleAr:"السنة النبوية", titleId:"As-Sunnah",
      descAr:"ما صدر عن النبي ﷺ من قول أو فعل أو تقرير.",
      descId:"Apa yang berasal dari Nabi SAW, baik berupa perkataan, perbuatan, maupun persetujuan (taqrir).",
      exAr:"قوله ﷺ: «إنما الأعمال بالنيات» (قول). صلاته على الراحلة (فعل). سكوته عن أكل الضب (تقرير).", exId:"Sabdanya: “Amal itu tergantung niat” (ucapan). Shalatnya di atas kendaraan (perbuatan). Diamnya beliau atas daging biawak yang dimakan (persetujuan)."},
    {no:8, cat:"Sumber Hukum Primer",
      titleAr:"حجية السنة", titleId:"Hujjiyah (Otoritas) Sunnah",
      descAr:"السنة حجة بنفسها ومصدر للتشريع كالقرآن.",
      descId:"Sunnah adalah argumen (hujjah) yang independen dan sumber syariat sebagaimana Al-Qur'an.",
      exAr:"القرآن يأمر بالصلاة إجمالاً، والسنة تفصّل كيفيتها وأوقاتها.", exId:"Al-Qur'an memerintahkan shalat secara umum, sedangkan Sunnah merinci tata cara dan waktunya."},
    {no:9, cat:"Sumber Hukum Primer",
      titleAr:"المتواتر والآحاد", titleId:"Mutawatir dan Ahad",
      descAr:"المتواتر يفيد العلم القطعي، والآحاد يفيد الظن الراجح ويجب العمل به.",
      descId:"Hadits Mutawatir menghasilkan ilmu yang pasti (qath'i), sedangkan Ahad menghasilkan dugaan kuat (zhann) dan wajib diamalkan.",
      exAr:"حديث «من كذب علي متعمدًا...» متواتر. وأكثر أحاديث الأحكام آحاد.", exId:"Hadits “Barangsiapa berdusta atas namaku...” adalah mutawatir. Mayoritas hadits hukum adalah ahad."},
    {no:10, cat:"Sumber Hukum Primer",
      titleAr:"النسخ", titleId:"Naskh (Penghapusan Hukum)",
      descAr:"رفع حكم شرعي بدليل شرعي متأخر.",
      descId:"Menghapus suatu hukum syar'i dengan dalil syar'i lain yang datang kemudian.",
      exAr:"وجوب التوجه لبيت المقدس نُسخ بوجوب التوجه للكعبة.", exId:"Kewajiban menghadap Baitul Maqdis dihapus (naskh) oleh kewajiban menghadap Ka'bah."},
      
    // Sumber Hukum Sekunder (11-15)
    {no:11, cat:"Sumber Hukum Sekunder",
      titleAr:"الإجماع", titleId:"Ijma' (Konsensus)",
      descAr:"اتفاق جميع المجتهدين من أمة محمد ﷺ بعد وفاته على حكم شرعي.",
      descId:"Kesepakatan seluruh mujtahid dari umat Muhammad SAW setelah wafatnya atas suatu hukum syar'i.",
      exAr:"الإجماع على أن الصلوات المفروضة خمس.", exId:"Adanya ijma' bahwa shalat fardhu itu lima waktu."},
    {no:12, cat:"Sumber Hukum Sekunder",
      titleAr:"القياس", titleId:"Qiyas (Analogi)",
      descAr:"إلحاق واقعة لا نص فيها بواقعة ورد فيها نص لاشتراكهما في علة الحكم.",
      descId:"Menyamakan suatu kasus yang tidak ada dalilnya dengan kasus yang ada dalilnya karena kesamaan 'illah (alasan hukum).",
      exAr:"قياس النبيذ على الخمر في التحريم لاشتراكهما في علة الإسكار.", exId:"Menganalogikan nabidz (perasan anggur) dengan khamr dalam hal keharaman karena keduanya memiliki 'illah yang sama, yaitu memabukkan."},
    {no:13, cat:"Sumber Hukum Sekunder",
      titleAr:"الاستحسان", titleId:"Istihsan",
      descAr:"العدول عن قياس جلي إلى قياس خفي، أو عن حكم كلي إلى استثناء، لدليل أرجح.",
      descId:"Beralih dari qiyas yang jelas ke qiyas yang samar, atau dari hukum umum ke pengecualian, karena ada dalil yang lebih kuat.",
      exAr:"جواز عقد السَّلَم (jual beli pesanan) استثناءً من النهي عن بيع ما ليس عندك، للحاجة.", exId:"Diperbolehkannya akad salam (pesan) adalah pengecualian dari larangan menjual barang yang belum dimiliki, karena adanya kebutuhan (hajat)."},
    {no:14, cat:"Sumber Hukum Sekunder",
      titleAr:"المصالح المرسلة", titleId:"Maslahah Mursalah",
      descAr:"جلب منفعة أو دفع مضرة لم يشهد الشرع باعتبارها أو إلغائها بنص معين.",
      descId:"Mendatangkan kemaslahatan atau menolak kemudharatan yang tidak disinggung secara spesifik oleh dalil untuk diakui atau ditolak.",
      exAr:"جمع القرآن في مصحف واحد، وإنشاء الدواوين (kantor administrasi negara).", exId:"Pengumpulan Al-Qur'an dalam satu mushaf dan pendirian lembaga administrasi negara."},
    {no:15, cat:"Sumber Hukum Sekunder",
      titleAr:"سد الذرائع", titleId:"Sadd al-Dzarā'i'",
      descAr:"منع المباحات التي قد تؤدي إلى مفاسد.",
      descId:"Melarang hal-hal yang mubah (boleh) karena dapat mengantarkan kepada kerusakan (mafsadah).",
      exAr:"تحريم بيع السلاح وقت الفتنة لمنع استخدامه في القتل.", exId:"Mengharamkan penjualan senjata di saat terjadi konflik untuk mencegah penggunaannya dalam pembunuhan."},

    // Kaidah Dilalah (16-25)
    {no:16, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"الأمر يقتضي الوجوب", titleId:"Perintah Menunjukkan Kewajiban",
      descAr:"الأصل في صيغة الأمر أنها تفيد الوجوب، إلا بقرينة صارفة.",
      descId:"Hukum asal dari bentuk kata perintah (amr) adalah menunjukkan kewajiban, kecuali ada indikasi (qarinah) yang memalingkannya.",
      exAr:"﴿أَقِيمُوا الصَّلَاةَ﴾: الأمر هنا للوجوب.", exId:"“Dirikanlah shalat”: Perintah di sini untuk kewajiban."},
    {no:17, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"النهي يقتضي التحريم", titleId:"Larangan Menunjukkan Keharaman",
      descAr:"الأصل في صيغة النهي أنها تفيد التحريم، إلا بقرينة صارفة.",
      descId:"Hukum asal dari bentuk kata larangan (nahy) adalah menunjukkan keharaman, kecuali ada indikasi yang memalingkannya.",
      exAr:"﴿وَلَا تَقْرَبُوا الزِّنَا﴾: النهي هنا للتحريم.", exId:"“Dan janganlah kalian mendekati zina”: Larangan di sini untuk keharaman."},
    {no:18, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"العام والخاص", titleId:"'Amm (Umum) dan Khass (Khusus)",
      descAr:"العام لفظ يستغرق جميع أفراده. والخاص يقصر العام على بعض أفراده.",
      descId:"'Amm adalah lafaz yang mencakup seluruh anggotanya. Khass adalah lafaz yang membatasi lafaz 'Amm pada sebagian anggotanya.",
      exAr:"﴿وَالْمُطَلَّقَاتُ يَتَرَبَّصْنَ...﴾ (عام) ثم خُصِّص بـ ﴿وَأُولَاتُ الْأَحْمَالِ أَجَلُهُنَّ...﴾ (خاص).", exId:"“Wanita-wanita yang ditalak hendaklah menahan diri...” ('Amm), kemudian dikhususkan oleh “dan perempuan-perempuan yang hamil, waktu iddah mereka...” (Khass)."},
    {no:19, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"المطلق والمقيد", titleId:"Muthlaq (Absolut) dan Muqayyad (Terikat)",
      descAr:"المطلق يتناول فردًا شائعًا بلا قيد. والمقيد ما قُيِّد بصفة.",
      descId:"Muthlaq adalah lafaz yang menunjuk pada satu individu tanpa batasan. Muqayyad adalah yang diberi batasan (sifat).",
      exAr:"في كفارة الظهار: ﴿فَتَحْرِيرُ رَقَبَةٍ﴾ (مطلق). في كفارة القتل: ﴿فَتَحْرِيرُ رَقَبَةٍ مُؤْمِنَةٍ﴾ (مقيد).", exId:"Pada kafarat zhihar: “memerdekakan seorang budak” (muthlaq). Pada kafarat pembunuhan: “memerdekakan seorang budak yang beriman” (muqayyad)."},
    {no:20, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"المنطوق والمفهوم", titleId:"Manthuq dan Mafhum",
      descAr:"المنطوق ما دل عليه اللفظ في محل النطق. والمفهوم ما دل عليه في غير محل النطق.",
      descId:"Manthuq adalah makna yang ditunjukkan lafaz secara eksplisit. Mafhum adalah makna yang ditunjukkan secara implisit.",
      exAr:"﴿فَلَا تَقُلْ لَهُمَا أُفٍّ﴾ منطوقه تحريم قول «أف». ومفهومه (مفهوم الموافقة) تحريم الضرب.", exId:"“Maka sekali-kali janganlah kamu mengatakan kepada keduanya perkataan ‘ah’.” Manthuq-nya adalah haramnya berkata ‘ah’. Mafhum-nya (mafhum muwafaqah) adalah haramnya memukul."},
    {no:21, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"مفهوم المخالفة", titleId:"Mafhum Mukhalafah",
      descAr:"إثبات نقيض حكم المنطوق للمسكوت عنه.",
      descId:"Menetapkan kebalikan hukum dari yang disebutkan (manthuq) untuk kasus yang tidak disebutkan (maskut 'anhu).",
      exAr:"حديث: «في الغنم السائمة زكاة». مفهومه: الغنم غير السائمة (المعلوفة) لا زكاة فيها.", exId:"Hadits: “Pada kambing yang digembalakan (sa'imah) ada zakat.” Mafhumnya: kambing yang tidak digembalakan (diberi pakan) tidak ada zakatnya."},
    {no:22, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"دلالة الإشارة", titleId:"Dilalah Isyarah",
      descAr:"المعنى الذي لا يُقصد أصالةً من النص ولكنه لازم للمعنى الأصلي.",
      descId:"Makna yang bukan tujuan utama dari teks, tetapi merupakan konsekuensi logis dari makna utamanya.",
      exAr:"﴿أُحِلَّ لَكُمْ لَيْلَةَ الصِّيَامِ الرَّفَثُ إِلَىٰ نِسَائِكُمْ﴾ يشير إلى جواز أن يصبح الصائم جنبًا.", exId:"“Dihalalkan bagi kamu pada malam hari bulan puasa bercampur dengan isteri-isteri kamu” mengisyaratkan bolehnya seseorang yang berpuasa masuk waktu subuh dalam keadaan junub."},
    {no:23, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"لا اجتهاد مع النص", titleId:"Tidak Ada Ijtihad Jika Ada Nash",
      descAr:"إذا وجد نص صريح قطعي الدلالة في مسألة، فلا مجال للاجتهاد فيها.",
      descId:"Jika terdapat dalil (nash) yang jelas dan pasti maknanya, maka tidak ada ruang untuk ijtihad dalam masalah tersebut.",
      exAr:"لا يجوز الاجتهاد في عدد ركعات صلاة الظهر لأنها محددة بنص.", exId:"Tidak boleh berijtihad tentang jumlah rakaat shalat zuhur karena sudah ditentukan oleh nash."},
    {no:24, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"العبرة بعموم اللفظ لا بخصوص السبب", titleId:"Pelajaran Diambil dari Keumuman Lafaz",
      descAr:"الحكم المستفاد من النص يعمّ كل من ينطبق عليه اللفظ، وإن ورد النص لسبب خاص.",
      descId:"Hukum yang diambil dari suatu dalil berlaku umum untuk semua yang tercakup lafaznya, meskipun dalil itu turun karena sebab yang khusus.",
      exAr:"آية الظهار نزلت في أوس بن الصامت، لكن حكمها عام لكل المسلمين.", exId:"Ayat tentang zhihar turun terkait Aus bin Shamit, tetapi hukumnya berlaku umum untuk seluruh kaum muslimin."},
    {no:25, cat:"Kaidah Dilalah (Penunjukan Makna)",
      titleAr:"المشقة تجلب التيسير", titleId:"Kesulitan Mendatangkan Kemudahan",
      descAr:"الأحكام التي ينشأ عن تطبيقها حرج ومشقة على المكلف، يخففها الشرع.",
      descId:"Hukum-hukum yang dalam penerapannya menimbulkan kesulitan dan beban berat bagi mukallaf, maka syariat memberikan keringanan.",
      exAr:"جواز القصر والجمع في الصلاة للمسافر.", exId:"Diperbolehkannya qashar dan jamak shalat bagi musafir."},
      
    // Qiyas (Analogi) (26-30)
    {no:26, cat:"Qiyas (Analogi)",
      titleAr:"أركان القياس", titleId:"Rukun-rukun Qiyas",
      descAr:"أربعة: الأصل، والفرع، والحكم، والعلة الجامعة.",
      descId:"Ada empat: Ashl (pokok/kasus asal), Far'u (cabang/kasus baru), Hukm (hukum), dan 'Illah (alasan hukum yang sama).",
      exAr:"الأصل: الخمر. الفرع: المخدرات. الحكم: التحريم. العلة: الإسكار أو تغييب العقل.", exId:"Ashl: Khamr. Far'u: Narkotika. Hukm: Haram. 'Illah: Memabukkan atau menghilangkan akal."},
    {no:27, cat:"Qiyas (Analogi)",
      titleAr:"شروط العلة", titleId:"Syarat-syarat 'Illah",
      descAr:"أن تكون وصفًا ظاهرًا منضبطًا مناسبًا للحكم.",
      descId:"'Illah harus merupakan sifat yang jelas, terukur, dan relevan dengan hukumnya.",
      exAr:"علة تحريم الخمر هي «الإسكار»، وهو وصف ظاهر منضبط يمكن قياسه.", exId:"'Illah keharaman khamr adalah “memabukkan”, ini adalah sifat yang jelas dan terukur yang bisa dianalogikan."},
    {no:28, cat:"Qiyas (Analogi)",
      titleAr:"مسالك العلة", titleId:"Metode Menemukan 'Illah",
      descAr:"تُعرف العلة بالنص، أو الإيماء، أو الإجماع، أو السبر والتقسيم.",
      descId:"'Illah dapat diketahui melalui dalil (nash), isyarat (ima'), konsensus (ijma'), atau eliminasi (sabr wa taqsim).",
      exAr:"قوله ﷺ «إنها ليست بنجس، إنها من الطوافين عليكم» نص في علة طهارة سؤر الهرة.", exId:"Sabda Nabi “Ia (kucing) tidak najis, ia termasuk yang sering berkeliling di antara kalian” adalah dalil ('illah) sucinya sisa jilatan kucing."},
    {no:29, cat:"Qiyas (Analogi)",
      titleAr:"القياس في العبادات", titleId:"Qiyas dalam Ibadah",
      descAr:"لا يجري القياس في العبادات المحضة التي لا تُعقل علتها.",
      descId:"Qiyas tidak berlaku pada ibadah murni (mahdhah) yang 'illah-nya tidak dapat dinalar.",
      exAr:"لا يصح قياس صلاة الظهر على صلاة الجمعة في وجوب الجماعة.", exId:"Tidak sah menganalogikan shalat Zuhur dengan shalat Jumat dalam hal kewajiban berjamaah."},
    {no:30, cat:"Qiyas (Analogi)",
      titleAr:"الفرق المؤثر", titleId:"Perbedaan yang Mempengaruhi (Fariq Mu'atstsir)",
      descAr:"يبطل القياس بوجود فرق مؤثر بين الأصل والفرع.",
      descId:"Qiyas menjadi batal jika ada perbedaan yang signifikan dan relevan antara kasus asal (ashl) dan kasus baru (far'u).",
      exAr:"لا يقاس العبد على الحر في الدية لوجود فرق الرق.", exId:"Budak tidak bisa diqiyaskan dengan orang merdeka dalam hal diyat karena ada perbedaan status perbudakan."},

    // Maqasid & Ijtihad (31-35)
    {no:31, cat:"Maqasid & Ijtihad",
      titleAr:"مقاصد الشريعة", titleId:"Maqasid al-Shariah (Tujuan Syariat)",
      descAr:"الغايات التي تهدف الشريعة إلى تحقيقها، وهي حفظ الضروريات الخمس.",
      descId:"Tujuan-tujuan yang ingin dicapai oleh syariat, yaitu menjaga lima kebutuhan primer (dharuriyyat).",
      exAr:"حفظ الدين، والنفس، والعقل، والنسل، والمال.", exId:"Menjaga Agama, Jiwa, Akal, Keturunan, dan Harta."},
    {no:32, cat:"Maqasid & Ijtihad",
      titleAr:"الضروريات، الحاجيات، التحسينيات", titleId:"Dharuriyyat, Hajiyyat, Tahsiniyyat",
      descAr:"مراتب المصالح: ما لا بد منه، وما يرفع الحرج، وما يتمم المكارم.",
      descId:"Tingkatan maslahat: yang harus ada (primer), yang menghilangkan kesulitan (sekunder), dan yang menyempurnakan (tersier).",
      exAr:"القصاص (ضروري)، الرخص للمسافر (حاجي)، آداب الأكل (تحسيني).", exId:"Hukum Qisas (dharuri), rukhsah bagi musafir (hajiyyat), adab makan (tahsiniyyat)."},
    {no:33, cat:"Maqasid & Ijtihad",
      titleAr:"الاجتهاد", titleId:"Ijtihad",
      descAr:"بذل الفقيه وسعه لاستنباط حكم شرعي من أدلته التفصيلية.",
      descId:"Pengerahan segenap kemampuan seorang ahli fikih (faqih) untuk menyimpulkan hukum syar'i dari dalil-dalilnya yang terperinci.",
      exAr:"اجتهاد الفقهاء في حكم التأمين المعاصر.", exId:"Ijtihad para ulama fikih mengenai hukum asuransi modern."},
    {no:34, cat:"Maqasid & Ijtihad",
      titleAr:"شروط المجتهد", titleId:"Syarat-syarat Mujtahid",
      descAr:"العلم بالقرآن والسنة، واللغة العربية، وأصول الفقه، ومواضع الإجماع.",
      descId:"Memiliki ilmu tentang Al-Qur'an, Sunnah, Bahasa Arab, Usul Fiqh, dan tempat-tempat terjadinya Ijma'.",
      exAr:"لا يصح الاجتهاد ممن يجهل الناسخ والمنسوخ.", exId:"Tidak sah ijtihad dari orang yang tidak mengetahui nasikh dan mansukh."},
    {no:35, cat:"Maqasid & Ijtihad",
      titleAr:"التقليد والاتباع", titleId:"Taqlid dan Ittiba'",
      descAr:"التقليد: أخذ قول الغير بلا معرفة دليله. الاتباع: أخذ قوله مع معرفة دليله.",
      descId:"Taqlid: Mengambil pendapat orang lain tanpa mengetahui dalilnya. Ittiba': Mengambil pendapat beserta dalilnya.",
      exAr:"العامي يقلد المفتي. وطالب العلم يتبع قول الإمام بعد دراسة أدلته.", exId:"Orang awam bertaqlid pada mufti. Penuntut ilmu melakukan ittiba' pada pendapat imam setelah mempelajari dalilnya."},

    // Kaidah Fikih Asasi (36-50) ... (Tambahan beberapa kaidah fiqih penting)
    {no:36, cat:"Kaidah Fikih Asasi",
      titleAr:"الأمور بمقاصدها", titleId:"Segala Urusan Tergantung Tujuannya",
      descAr:"أعمال المكلف وتصرفاته تختلف نتائجها وأحكامها باختلاف القصد والنية.",
      descId:"Perbuatan dan tindakan seorang mukallaf memiliki hasil dan hukum yang berbeda-beda tergantung pada maksud dan niatnya.",
      exAr:"من أمسك عن الطعام بنية التعبد فهو صائم، ومن أمسك بنية الحمية فليس بصائم.", exId:"Orang yang menahan makan dengan niat ibadah maka ia berpuasa, jika niatnya diet maka ia tidak berpuasa."},
    {no:37, cat:"Kaidah Fikih Asasi",
      titleAr:"اليقين لا يزول بالشك", titleId:"Keyakinan Tidak Hilang Karena Keraguan",
      descAr:"ما ثبت بيقين يبقى على ما كان عليه، ولا يرتفع حكمه إلا بيقين مثله.",
      descId:"Sesuatu yang telah tetap berdasarkan keyakinan akan tetap demikian, dan hukumnya tidak akan berubah kecuali dengan keyakinan yang setara.",
      exAr:"من تيقن الطهارة وشك في الحدث، فالأصل بقاء طهارته.", exId:"Siapa yang yakin telah bersuci lalu ragu apakah ia berhadats, maka hukum asalnya ia tetap suci."},
    {no:38, cat:"Kaidah Fikih Asasi",
      titleAr:"الضرر يزال", titleId:"Kemudharatan Harus Dihilangkan",
      descAr:"يجب رفع الضرر الواقع ودفع الضرر المتوقع.",
      descId:"Wajib untuk menghilangkan kemudharatan yang telah terjadi dan menolak kemudharatan yang diperkirakan akan terjadi.",
      exAr:"مشروعية خيار العيب في البيع لرفع الضرر عن المشتري.", exId:"Disyariatkannya hak pilih karena cacat (khiyar 'aib) dalam jual beli untuk menghilangkan mudharat dari pembeli."},
    {no:39, cat:"Kaidah Fikih Asasi",
      titleAr:"لا ضرر ولا ضرار", titleId:"Tidak Boleh Membahayakan Diri dan Orang Lain",
      descAr:"لا يجوز للإنسان أن يضر بنفسه أو بغيره.",
      descId:"Seseorang tidak boleh melakukan sesuatu yang membahayakan dirinya sendiri ataupun orang lain.",
      exAr:"النهي عن الاحتكار لما فيه من إضرار بالناس.", exId:"Larangan monopoli (ihtikar) karena di dalamnya terdapat unsur membahayakan orang banyak."},
    {no:40, cat:"Kaidah Fikih Asasi",
      titleAr:"العادة مُحَكَّمة", titleId:"Adat Kebiasaan Bisa Menjadi Hukum",
      descAr:"ما استقر في النفوس من الأمور المتكررة، يُرجع إليه في تفسير الإرادات وتحديد الالتزامات.",
      descId:"Sesuatu yang telah mapan di masyarakat dari perkara yang berulang-ulang, dapat menjadi rujukan dalam menafsirkan kehendak dan menentukan kewajiban.",
      exAr:"تحديد مقدار النفقة للزوجة يرجع إلى عرف البلد.", exId:"Menentukan besaran nafkah istri merujuk pada adat ('urf) yang berlaku di suatu negeri."}
  ];

  // 3. Render Logic
  const chipsEl = document.getElementById('chips');
  const selected = new Set();
  categories.forEach(c => {
    const el = document.createElement('button');
    el.className = 'chip';
    el.textContent = c;
    el.dataset.cat = c;
    el.addEventListener('click', () => {
      if(selected.has(c)) { selected.delete(c); el.classList.remove('active'); }
      else { selected.add(c); el.classList.add('active'); }
      render();
    });
    chipsEl.appendChild(el);
  });

  const grid = document.getElementById('grid');
  const countEl = document.getElementById('count');
  const search = document.getElementById('search');
  const toast = document.getElementById('toast');

  function escapeHTML(s){ return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m])) }

  function cardTemplate(r){
    return `
      <article class="card will-reveal" data-cat="${r.cat}" data-no="${r.no}">
        <div class="top">
          <div class="num" aria-hidden="true">${r.no}</div>
        </div>
        <h3 class="ar" lang="ar" dir="rtl">${escapeHTML(r.titleAr)}</h3>
        <div class="title-id">${escapeHTML(r.titleId)}</div>

        <p class="desc-ar ar" lang="ar" dir="rtl">${escapeHTML(r.descAr)}</p>
        <p class="desc-id">${escapeHTML(r.descId)}</p>

        <details class="example">
          <summary>💡 مثال | Contoh</summary>
          <div class="example-body">
            <div class="ex-ar ar" lang="ar" dir="rtl">${escapeHTML(r.exAr)}</div>
            <div class="ex-id">${escapeHTML(r.exId)}</div>
          </div>
        </details>
        <button class="copy-btn" type="button" aria-label="Salin kaidah" data-no="${r.no}">Salin</button>
      </article>
    `;
  }

  function matchesFilter(r, q, chosen){
    const hay = (r.titleAr + ' ' + r.titleId + ' ' + r.descAr + ' ' + r.descId + ' ' + r.exAr + ' ' + r.exId + ' ' + r.cat).toLowerCase();
    const hitSearch = hay.includes(q.toLowerCase().trim());
    const hitCat = chosen.size ? chosen.has(r.cat) : true;
    return hitSearch && hitCat;
  }

  function render(){
    const q = search.value || '';
    const filtered = rules.filter(r => matchesFilter(r, q, selected));
    grid.innerHTML = filtered.map(cardTemplate).join('');
    countEl.textContent = String(filtered.length);
    revealInit();
  }

  search.addEventListener('input', render);

  document.getElementById('clearFilters').addEventListener('click', () => {
    search.value = '';
    selected.clear();
    document.querySelectorAll('.chip.active').forEach(el => el.classList.remove('active'));
    render();
  });

  // 4. Copy Handler
  grid.addEventListener('click', async (e) => {
    const btn = e.target.closest('.copy-btn');
    if(!btn) return;
    const no = btn.dataset.no;
    const r = rules.find(x => String(x.no) === String(no));
    if(!r) return;
    const text = `#${r.no} — ${r.titleAr} / ${r.titleId} [${r.cat}]
AR: ${r.descAr}
ID: ${r.descId}
---
Contoh:
AR: ${r.exAr}
ID: ${r.exId}`;
    try{
      await navigator.clipboard.writeText(text);
      showToast('✅ Kaidah tersalin!');
      btn.textContent = 'Tersalin!';
      setTimeout(() => btn.textContent = 'Salin', 1500);
    }catch(err){
      showToast('⚠️ Gagal menyalin');
    }
  });

  // 5. Toast Notification
  let toastTimer;
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add('show');
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast.classList.remove('show'), 2000);
  }

  // 6. IntersectionObserver for Reveal Animations
  let observer;
  function revealInit(){
    const items = document.querySelectorAll('.will-reveal');
    if (observer) { observer.disconnect(); }
    observer = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if(e.isIntersecting){
          e.target.classList.add('revealed');
          observer.unobserve(e.target);
        }
      })
    }, { threshold: .1, rootMargin: '0px 0px -50px 0px'});
    items.forEach(it => observer.observe(it));
  }

  // 7. Utility Listeners (Scroll to Top, Footer Animation)
  const toTop = document.getElementById('toTop');
  window.addEventListener('scroll', () => {
    const y = window.scrollY || document.documentElement.scrollTop;
    toTop.classList.toggle('visible', y > 600);
  });

  const footer = document.querySelector('footer');
  const footerObserver = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if(e.isIntersecting){
        footer.classList.add('visible');
        footerObserver.unobserve(footer);
      }
    })
  }, { threshold: .1 });
  footerObserver.observe(footer);

  // Initial Render
  render();
</script>

</body>

</html>

